from collections import defaultdict
from typing import List 

class Solution:
    """
    uses memory 19.46mb
    type out the best sol for this prob
    """
    def validate(self, line: List[str]) -> bool:
        n = {}
        for i in line:
            if i != '.' and i in n.keys():
                return False
            n[i] = True
        return True
    def isValidSudoku(self, board: List[List[str]]) -> bool:
        # row
        for line in board:
            if self.validate(line):
                continue
            else:
                return False
        # column
        n = []
        for i in range(9):
            n = []
            for line in board:
                n.append(line[i])
            if self.validate(n):
                continue
            else:
                return False
        
        # sub-boxes
        n=[[] for i in range(3)]
        for i in range(10):
            if (i%3) == 0 and i != 0:
                for line in n:
                    if self.validate(line):
                        continue
                    else:
                        return False
                n=[[] for i in range(3)]
            if i == 9:
                break
            for j in range(9):
                n[j//3].append(board[i][j])
        return True
    
# board = [["8","3",".",".","7",".",".",".","."],["6",".",".","1","9","5",".",".","."],[".","9","8",".",".",".",".","6","."],["8",".",".",".","6",".",".",".","3"],["4",".",".","8",".","3",".",".","1"],["7",".",".",".","2",".",".",".","6"],[".","6",".",".",".",".","2","8","."],[".",".",".","4","1","9",".",".","5"],[".",".",".",".","8",".",".","7","9"]]
# board = [[".",".",".",".","5",".",".","1","."],
#          [".","4",".","3",".",".",".",".","."],
#          [".",".",".",".",".","3",".",".","1"],
#          ["8",".",".",".",".",".",".","2","."],
#          [".",".","2",".","7",".",".",".","."],
#          [".","1","5",".",".",".",".",".","."],
#          [".",".",".",".",".","2",".",".","."],
#          [".","2",".","9",".",".",".",".","."],
#          [".",".","4",".",".",".",".",".","."]]
board = [[".",".",".",".",".",".","5",".","."],
         [".",".",".",".",".",".",".",".","."],
         [".",".",".",".",".",".",".",".","."],
         ["9","3",".",".","2",".","4",".","."],
         [".",".","7",".",".",".","3",".","."],
         [".",".",".",".",".",".",".",".","."],
         [".",".",".","3","4",".",".",".","."],
         [".",".",".",".",".","3",".",".","."],
         [".",".",".",".",".","5","2",".","."]]
# board = [["5","3",".",".","7",".",".",".","."],["6",".",".","1","9","5",".",".","."],[".","9","8",".",".",".",".","6","."],["8",".",".",".","6",".",".",".","3"],["4",".",".","8",".","3",".",".","1"],["7",".",".",".","2",".",".",".","6"],[".","6",".",".",".",".","2","8","."],[".",".",".","4","1","9",".",".","5"],[".",".",".",".","8",".",".","7","9"]]
sol = Solution()
print(sol.isValidSudoku(board))